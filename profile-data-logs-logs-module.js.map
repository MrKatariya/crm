{"version":3,"sources":["./src/app/profile-data/logs/logs.module.ts","./src/app/profile-data/logs/logs.component.ts","./src/app/profile-data/logs/logs.component.html","./src/app/profile-data/logs/logs-routing.module.ts"],"names":[],"mappings":"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","file":"profile-data-logs-logs-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LogsRoutingModule } from './logs-routing.module';\nimport { LogsComponent } from './logs.component';\nimport {AllModule} from \"../../modules/all.module\";\n\n\n@NgModule({\n  declarations: [LogsComponent],\n  imports: [\n    CommonModule,\n    LogsRoutingModule,\n    AllModule\n  ]\n})\nexport class LogsModule { }\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { MatDialog } from \"@angular/material/dialog\";\nimport {FirestoreService} from \"../../services/firestore.service\";\nimport {CookieService} from \"ngx-cookie-service\";\nimport {FormBuilder} from \"@angular/forms\";\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\nimport {SnackbarComponent} from \"../../snackbar/snackbar.component\";\nimport {CallerService} from \"../../services/caller.service\";\n\n@Component({\n  selector: 'app-logs',\n  templateUrl: './logs.component.html',\n  styleUrls: ['./logs.component.scss'],\n  encapsulation:ViewEncapsulation.None\n})\nexport class LogsComponent implements OnInit {\n\npublic callCategory:string[]=[\n  \"Dialled call\",\n  \"Received call\",\n  \"Missed call\"\n];\npublic log:any[]=[];\npublic customersRecord:any[]=[];\npublic callForm=this.fb.group({\n  email:[''],\n  c_name:[{value:'',disabled:true}],\n  mobile:[{value:'',disabled:true}],\n  callCategory:[''],\n  user_id:[''],\n  created_at:[''],\n  picture:['']\n});\nprivate currentDialog:any;\n  constructor(\n    private alert:MatDialog,\n    private firestore:FirestoreService,\n    private cookie:CookieService,\n    private fb:FormBuilder,\n    private snackbar:MatSnackBar,\n    private caller:CallerService\n  ) { }\n\n  ngOnInit(): void {\n    this.caller.subject.subscribe((response:any)=>{\n      this.log.push(response);\n    });\n  }\n  addCall(el:any):void{\n    const customers = this.firestore.getDataByColumnName(\"customers\",\"merchant_id\",this.cookie.get(\"user_id\"));\n    customers.subscribe((info)=>{\n      info.map((response:any)=>{\n        this.customersRecord.push(response.payload.doc.data());\n      });\n      this.currentDialog=this.alert.open(el);\n    });\n\n  }\n\n  showCustomersMobileAndName(cname:string,mobile:number,picture:string):void{\n    this.callForm.patchValue({\n      c_name:cname,\n      mobile:mobile,\n      picture:picture\n    });\n  }\n\n  createCall():void{\n    this.callForm.patchValue({\n      user_id:this.cookie.get(\"user_id\"),\n      created_at:new Date()\n    });\n    const logs=this.firestore.insert(\"logs\",this.callForm.getRawValue());\n    logs.then((response:any)=>{\n      this.currentDialog.close();\n      this.currentCall(this.callForm.getRawValue(),response.id);\n    });\n  }\n\n  currentCall(callerInfo:any, lastInsertedId:string):void{\n    callerInfo[\"lastInsertedId\"]=lastInsertedId;\n    this.snackbar.openFromComponent(SnackbarComponent,{\n      horizontalPosition:\"end\",\n      data:callerInfo\n    });\n  }\n\n}\n","<mat-card fxLayout=\"row\" class=\"my-4 p-0\">\n  <mat-card-content class=\"p-4 mb-0 card-panel\" fxLayout=\"column\">\n    <button mat-button mat-raised-button color=\"primary\" (click)=\"addCall(call)\">Add Call</button>\n    <h5 class=\"desc-text mt-5 mb-3\" style=\"color:black;\">FILTER</h5>\n    <div fxLayout=\"column\" fxLayoutGap=\"16px\">\n      <mat-radio-group fxLayout=\"column\" fxLayoutGap=\"16px\">\n        <mat-radio-button [value]=\"data\" *ngFor=\"let data of callCategory\" >{{data}}</mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </mat-card-content>\n  <mat-card-content class=\"p-4\" fxFlex=\"100%\">\n    <div class=\"px-3 py-2\" style=\"border:1px solid #ddd\" [style]=\"i < log.length-1 ? 'border-bottom:none':''\" fxLayoutAlign=\"space-between center\" *ngFor=\"let data of log;index as i\">\n      <div fxLayout=\"row\">\n        <img [src]=\"data.picture\" style=\"width:40px;border-radius:50%;\" class=\"mr-2\">\n        <div>\n          <h1 class=\"p-0 mt-0 mb-1 title-text\" style=\"font-size:15px\">\n            {{data.c_name}}\n          </h1>\n          <p class=\"p-0 m-0 desc-text\" style=\"font-size:12px\">\n            {{data.mobile}}\n          </p>\n        </div>\n\n      </div>\n      <div>\n        <h1 class=\"p-0 mt-0 mb-1 title-text\" style=\"font-size:15px\">\n          {{data.callCategory}}\n        </h1>\n        <p class=\"p-0 m-0 desc-text\" style=\"font-size:12px\">\n          {{data.created_at | date :'shortTime'}}\n        </p>\n      </div>\n    </div>\n\n  </mat-card-content>\n</mat-card>\n<ng-template #call>\n  <h1 mat-dialog-title>Add a call</h1>\n  <div mat-dialog-content>\n    <form fxLayout=\"column\" fxFlex=\"320px\" [formGroup]=\"callForm\" (submit)=\"createCall()\">\n      <mat-form-field>\n        <mat-label>Customer's Email</mat-label>\n        <mat-select formControlName=\"email\">\n          <mat-option [value]=\"data.email\" *ngFor=\"let data of customersRecord\" (click)=\"showCustomersMobileAndName(data.c_name, data.mobile, data.picture)\">{{data.email}}</mat-option>\n        </mat-select>\n      </mat-form-field>\n      <mat-form-field>\n        <mat-label>Customer's Name</mat-label>\n        <input matInput formControlName=\"c_name\">\n      </mat-form-field>\n      <mat-form-field>\n        <mat-label>Customer's Mobile</mat-label>\n        <input matInput type=\"number\" formControlName=\"mobile\">\n      </mat-form-field>\n      <mat-form-field>\n        <mat-label>Call Category</mat-label>\n        <mat-select formControlName=\"callCategory\">\n          <mat-option [value]=\"cat\" *ngFor=\"let cat of callCategory\">{{cat}}</mat-option>\n        </mat-select>\n      </mat-form-field>\n      <button mat-button mat-stroked-button color=\"primary\" >Submit</button>\n    </form>\n  </div>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LogsComponent } from './logs.component';\n\nconst routes: Routes = [{ path: '', component: LogsComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LogsRoutingModule { }\n"],"sourceRoot":"webpack:///"}